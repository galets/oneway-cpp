name: C/C++ CI

on:
    push:
        branches: ["master"]
    pull_request:
        branches: ["master"]

jobs:
    build:
        runs-on: ubuntu-22.04

        steps:
            - uses: actions/checkout@v3
            - name: submodules
              run: git submodule init; git submodule update
            - name: configure
              run: ./configure
            - name: make-lib
              run: make external/cryptopp/libcryptopp.a
            - name: make
              run: make
            - name: make check
              run: make check
            # - name: make distcheck
            #   run: make distcheck
